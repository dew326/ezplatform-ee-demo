(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ezplatform-page-builder-preview-in-siteaccess-js"],{

/***/ "./vendor/ezsystems/ezplatform-admin-ui/src/bundle/Resources/public/js/scripts/sidebar/btn/location.edit.js":
/*!******************************************************************************************************************!*\
  !*** ./vendor/ezsystems/ezplatform-admin-ui/src/bundle/Resources/public/js/scripts/sidebar/btn/location.edit.js ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n(function (global, doc, $) {\n  var editActions = doc.querySelector('.ez-extra-actions--edit') || doc.querySelector('.ez-extra-actions--edit-user');\n\n  var btns = _toConsumableArray(editActions.querySelectorAll('.form-check [type=\"radio\"]'));\n\n  var form = editActions.querySelector('form');\n  var contentIdInput = form.querySelector('#content_edit_content_info') || form.querySelector('#user_edit_content_info');\n  var contentId = contentIdInput.value;\n  var checkVersionDraftLink = global.Routing.generate('ezplatform.version_draft.has_no_conflict', {\n    contentId: contentId\n  });\n\n  var resetRadioButtons = function resetRadioButtons() {\n    return btns.forEach(function (btn) {\n      btn.checked = false;\n    });\n  };\n\n  var addDraft = function addDraft() {\n    form.submit();\n    $('#version-draft-conflict-modal').modal('hide');\n  };\n\n  var redirectToUserEdit = function redirectToUserEdit() {\n    var versionNo = form.querySelector('#user_edit_version_info_version_no').value;\n    var checkedBtn = btns.find(function (btn) {\n      return btn.checked;\n    });\n    var language = checkedBtn.value;\n    window.location.href = global.Routing.generate('ez_user_update', {\n      contentId: contentId,\n      versionNo: versionNo,\n      language: language\n    });\n  };\n\n  var onModalHidden = function onModalHidden() {\n    resetRadioButtons();\n    var event = new CustomEvent('ez-draft-conflict-modal-hidden');\n    doc.body.dispatchEvent(event);\n  };\n\n  var attachModalListeners = function attachModalListeners(wrapper) {\n    var addDraftButton = wrapper.querySelector('.ez-btn--add-draft');\n\n    if (addDraftButton) {\n      addDraftButton.addEventListener('click', addDraft, false);\n    }\n\n    _toConsumableArray(wrapper.querySelectorAll('.ez-btn--prevented')).forEach(function (btn) {\n      return btn.addEventListener('click', function (event) {\n        return event.preventDefault();\n      }, false);\n    });\n\n    $('#version-draft-conflict-modal').modal('show').on('hidden.bs.modal', onModalHidden);\n  };\n\n  var showModal = function showModal(modalHtml) {\n    var wrapper = doc.querySelector('.ez-modal-wrapper');\n    wrapper.innerHTML = modalHtml;\n    attachModalListeners(wrapper);\n  };\n\n  var changeHandler = function changeHandler() {\n    fetch(checkVersionDraftLink, {\n      credentials: 'same-origin'\n    }).then(function (response) {\n      if (response.status === 409) {\n        response.text().then(showModal);\n      } else if (response.status === 200) {\n        if (form.querySelector('#user_edit_version_info')) {\n          redirectToUserEdit();\n          return;\n        }\n\n        form.submit();\n      }\n    });\n  };\n\n  btns.forEach(function (btn) {\n    return btn.addEventListener('change', changeHandler, false);\n  });\n})(window, document, window.jQuery);\n\n//# sourceURL=webpack:///./vendor/ezsystems/ezplatform-admin-ui/src/bundle/Resources/public/js/scripts/sidebar/btn/location.edit.js?");

/***/ }),

/***/ 46:
/*!*************************************************************************************!*\
  !*** multi ./web/bundles/ezplatformadminui/js/scripts/sidebar/btn/location.edit.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! /home/dev/server/pb-demo.v2/web/bundles/ezplatformadminui/js/scripts/sidebar/btn/location.edit.js */\"./vendor/ezsystems/ezplatform-admin-ui/src/bundle/Resources/public/js/scripts/sidebar/btn/location.edit.js\");\n\n\n//# sourceURL=webpack:///multi_./web/bundles/ezplatformadminui/js/scripts/sidebar/btn/location.edit.js?");

/***/ })

},[[46,"runtime"]]]);