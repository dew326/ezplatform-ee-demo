(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["flex-workflow-common-js"],{

/***/ "./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js":
/*!**************************************************************************************!*\
  !*** ./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("(function (global, doc) {\n  var CLASS_HIDDEN = 'fw-send-for-review__user-list--hidden';\n  var SELECTOR_USER_LIST = '.fw-send-for-review__user-list';\n  var SELECTOR_USER_INPUT = '.fw-send-for-review__user-input';\n  var sendForReviewSubmitBtn = doc.querySelector('.fw-btn--send-for-review');\n  var sendForReviewOpenBtn = doc.querySelector('[data-actions=\"send-for-review\"]');\n  var token = doc.querySelector('meta[name=\"CSRF-Token\"]').content;\n  var siteaccess = doc.querySelector('meta[name=\"SiteAccess\"]').content;\n  var getReviewersTimeout;\n\n  var handleRequestResponse = function handleRequestResponse(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n\n    return response.json();\n  };\n\n  var getReviewerList = function getReviewerList(value) {\n    var body = JSON.stringify({\n      ViewInput: {\n        identifier: \"find-user-by-name-\".concat(value),\n        public: false,\n        ContentQuery: {\n          Criteria: {},\n          FacetBuilders: {},\n          SortClauses: {},\n          Query: {\n            FullTextCriterion: \"\".concat(value, \"*\"),\n            ContentTypeIdentifierCriterion: sendForReviewOpenBtn.dataset.contentTypeIdentifier\n          },\n          limit: 50,\n          offset: 0\n        }\n      }\n    });\n    var request = new Request('/api/ezp/v2/views', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/vnd.ez.api.View+json; version=1.1',\n        'Content-Type': 'application/vnd.ez.api.ViewInput+json; version=1.1',\n        'X-Siteaccess': siteaccess,\n        'X-CSRF-Token': token\n      },\n      body: body,\n      mode: 'same-origin',\n      credentials: 'same-origin'\n    });\n    fetch(request).then(handleRequestResponse).then(showReviewersList).catch(function (error) {\n      return console.log('error:find:user', error);\n    });\n  };\n\n  var createReviewersListItem = function createReviewersListItem(reviewer) {\n    return \"<li data-id=\\\"\".concat(reviewer._id, \"\\\" class=\\\"fw-send-for-review__user-item\\\">\").concat(reviewer.Name, \"</li>\");\n  };\n\n  var selectReviewer = function selectReviewer(event) {\n    var reviewer = doc.querySelector('.fw-send-for-review__user-name');\n    reviewer.dataset.id = event.target.dataset.id;\n    reviewer.innerHTML = event.target.innerHTML;\n    doc.querySelector(SELECTOR_USER_LIST).classList.add(CLASS_HIDDEN);\n    toggleStep(false);\n  };\n\n  var showReviewersList = function showReviewersList(data) {\n    var listContainer = doc.querySelector(SELECTOR_USER_LIST);\n    var reviewersList = data.View.Result.searchHits.searchHit.reduce(function (total, hit) {\n      return total + createReviewersListItem(hit.value.Content);\n    }, '');\n    listContainer.innerHTML = reviewersList;\n    listContainer.classList.remove(CLASS_HIDDEN);\n  };\n\n  var toggleStep = function toggleStep(firstStep) {\n    var messageMethodName = firstStep ? 'setAttribute' : 'removeAttribute';\n    var inputMethodName = firstStep ? 'removeAttribute' : 'setAttribute';\n    var input = doc.querySelector(SELECTOR_USER_INPUT);\n    doc.querySelector('.fw-send-for-review__user')[messageMethodName]('hidden', 'hidden');\n    doc.querySelector('.fw-send-for-review__message-wrapper')[messageMethodName]('hidden', 'hidden');\n    doc.querySelector('.fw-send-for-review__actions')[messageMethodName]('hidden', 'hidden');\n    input[inputMethodName]('hidden', 'hidden');\n    input.value = '';\n  };\n\n  var handleTyping = function handleTyping(event) {\n    var value = event.target.value.trim();\n    window.clearTimeout(getReviewersTimeout);\n\n    if (value.length > 2) {\n      getReviewersTimeout = window.setTimeout(getReviewerList.bind(null, value), 200);\n    }\n  };\n\n  var sendForReview = function sendForReview() {\n    var userId = doc.querySelector('.fw-send-for-review__user-name').dataset.id;\n    var message = doc.querySelector('.fw-send-for-review__message-wrapper textarea').value;\n    doc.querySelector('[name=\"ezrepoforms_content_edit[flex_workflow][reviewerId]\"]').value = userId;\n    doc.querySelector('[name=\"ezrepoforms_content_edit[flex_workflow][message]\"]').value = message;\n    doc.querySelector('[name=\"ezrepoforms_content_edit[send_for_review]\"]').click();\n  };\n\n  if (!sendForReviewSubmitBtn) {\n    return;\n  }\n\n  doc.querySelector(SELECTOR_USER_INPUT).addEventListener('keyup', handleTyping, false);\n  doc.querySelector(SELECTOR_USER_LIST).addEventListener('click', selectReviewer, false);\n  doc.querySelector('.ez-icon--remove-reviewer').addEventListener('click', toggleStep.bind(null, true), false);\n  sendForReviewSubmitBtn.addEventListener('click', sendForReview, false);\n})(window, document);\n\n//# sourceURL=webpack:///./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js?");

/***/ }),

/***/ 83:
/*!********************************************************************************************!*\
  !*** multi ./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! /home/dev/server/pb-demo.v2/vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js */\"./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js\");\n\n\n//# sourceURL=webpack:///multi_./vendor/ezsystems/flex-workflow/bundle/Resources/public/js/send.for.review.js?");

/***/ })

},[[83,"runtime"]]]);